{"ast":null,"code":"var _jsxFileName = \"/home/bhavajan_a/discord-clone/discord-mern-starter/src/Chat.js\";\nimport React from 'react';\nimport './Chat.css';\nimport ChatHeader from './ChatHeader';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport CradGiftcardIcon from '@material-ui/icons/CardGiftcard';\nimport GifIcon from '@material-ui/icons/Gif';\nimport EmojiEmoticonsIcon from '@material-ui/icons/EmojiEmotions';\nimport Message from './Message';\nimport { useSelector } from 'react-redux';\nimport { selectUser } from './features/userSlice';\nimport { selectChannelId, selectChannelName } from './features/appSlice';\nimport { useState } from 'react';\nimport { useEffect } from 'react';\nimport db from './firebase';\nimport firebase from 'firebase';\nimport axios from './axios';\nimport Pusher from 'pusher-js';\nconst pusher = new Pusher('ccfe8699f752cde7bccc', {\n  cluster: 'us2'\n});\nconst Chat = () => {\n  const user = useSelector(selectUser);\n  const channelId = useSelector(selectChannelId);\n  const channelName = useSelector(selectChannelName);\n  const [input, setInput] = useState('');\n  const [messages, setMessages] = useState([]);\n  const getConversation = channelId => {\n    if (channelId) {\n      axios.get(`/get/conversation?id=${channelId}`).then(res => {\n        setMessages(res.data[0].conversation);\n      });\n    }\n  };\n  useEffect(() => {\n    getConversation(channelId);\n    const channel = pusher.subscribe('conversation');\n    channel.bind('newMessage', function (data) {\n      getConversation(channelId);\n    });\n  }, [channelId]);\n  const sendMessage = e => {\n    e.preventDefault();\n    axios.post(`/new/message?id=${channelId}`, {\n      message: input,\n      timestamp: Date.now(),\n      user: user\n    });\n    setInput('');\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ChatHeader, {\n    channelName: channelName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat__messages\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, messages.map(message => {\n    console.log(message);\n  }), messages.map(message => /*#__PURE__*/React.createElement(Message, {\n    message: message.message,\n    timestamp: message.timestamp,\n    user: message.user,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat__input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(AddCircleIcon, {\n    fontSize: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    disabled: !channelId,\n    value: input,\n    onChange: e => setInput(e.target.value),\n    placeholder: `Message #${channelName}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"chat__inputButton\",\n    onClick: sendMessage,\n    disabled: !channelId,\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 21\n    }\n  }, \"Send Message\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat__inputIcon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CradGiftcardIcon, {\n    fontSize: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(GifIcon, {\n    fontSize: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(EmojiEmoticonsIcon, {\n    fontSize: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 21\n    }\n  }))));\n};\nexport default Chat;","map":{"version":3,"names":["React","ChatHeader","AddCircleIcon","CradGiftcardIcon","GifIcon","EmojiEmoticonsIcon","Message","useSelector","selectUser","selectChannelId","selectChannelName","useState","useEffect","db","firebase","axios","Pusher","pusher","cluster","Chat","user","channelId","channelName","input","setInput","messages","setMessages","getConversation","get","then","res","data","conversation","channel","subscribe","bind","sendMessage","e","preventDefault","post","message","timestamp","Date","now","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","map","console","log","fontSize","type","disabled","value","onChange","target","placeholder","onClick"],"sources":["/home/bhavajan_a/discord-clone/discord-mern-starter/src/Chat.js"],"sourcesContent":["import React from 'react'\r\nimport './Chat.css'\r\nimport ChatHeader from './ChatHeader'\r\nimport AddCircleIcon from '@material-ui/icons/AddCircle'\r\nimport CradGiftcardIcon from '@material-ui/icons/CardGiftcard'\r\nimport GifIcon from '@material-ui/icons/Gif'\r\nimport EmojiEmoticonsIcon from '@material-ui/icons/EmojiEmotions'\r\nimport Message from './Message'\r\nimport { useSelector } from 'react-redux'\r\nimport { selectUser } from './features/userSlice'\r\nimport { selectChannelId, selectChannelName } from './features/appSlice'\r\nimport { useState } from 'react'\r\nimport { useEffect } from 'react'\r\nimport db from './firebase'\r\nimport firebase from 'firebase'\r\nimport axios from './axios'\r\nimport Pusher from 'pusher-js'\r\n\r\nconst pusher = new Pusher('ccfe8699f752cde7bccc', {\r\n      cluster: 'us2'\r\n});\r\n\r\nconst Chat = () => {\r\n    const user = useSelector(selectUser)\r\n    const channelId = useSelector(selectChannelId)\r\n    const channelName = useSelector(selectChannelName)\r\n    const [input, setInput] = useState('')\r\n    const [messages, setMessages] = useState([])\r\n\r\n    const getConversation = (channelId) =>{\r\n        if (channelId){\r\n            axios.get(`/get/conversation?id=${channelId}`).then((res) =>{\r\n                setMessages(res.data[0].conversation)\r\n            })\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        getConversation(channelId)\r\n        const channel = pusher.subscribe('conversation');\r\n        channel.bind('newMessage', function(data) {\r\n            getConversation(channelId)\r\n        });\r\n    }, [channelId])\r\n\r\n    const sendMessage = (e) => {\r\n        e.preventDefault()\r\n\r\n        axios.post(`/new/message?id=${channelId}`, {\r\n            message: input,\r\n            timestamp: Date.now(),\r\n            user: user\r\n        })\r\n\r\n        setInput('')\r\n    }\r\n\r\n    return (\r\n        <div className='chat' >\r\n            <ChatHeader channelName={channelName} />\r\n\r\n            <div className=\"chat__messages\">\r\n                {messages.map((message) => {\r\n                    console.log(message)\r\n                })}\r\n                {messages.map(message => (\r\n                    <Message message={message.message} timestamp={message.timestamp} user={message.user} />\r\n                ))}\r\n            </div>\r\n\r\n            <div className=\"chat__input\">\r\n                <AddCircleIcon fontSize='large' />\r\n                <form>\r\n                    <input type=\"text\" disabled={!channelId} value={input} onChange={(e) => setInput(e.target.value)} placeholder={`Message #${channelName}`} />\r\n                    <button className='chat__inputButton' onClick={sendMessage} disabled={!channelId} type='submit'>Send Message</button>\r\n                </form>\r\n\r\n                <div className=\"chat__inputIcon\">\r\n                    <CradGiftcardIcon fontSize='large' />\r\n                    <GifIcon fontSize='large' />\r\n                    <EmojiEmoticonsIcon fontSize='large' />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chat\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}